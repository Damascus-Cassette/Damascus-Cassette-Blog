{{ define "main" }}
    <header>
        <h3 class="section-title">
            {{ if eq .Parent (.GetPage "/") }}
                {{ T "list.section" }}
            {{ else }}
                {{ .Parent.Title }}
            {{ end }}
        </h3>
    </header>
    
    {{- $subsections := .Sections -}}
    {{- $pages := .Pages | complement $subsections -}}
    
    {{- if eq (len $pages) 0 -}}
        {{/* If there are no normal pages, display subsections in list style, with pagination */}}
        {{/* This happens with taxonomies like categories or tags */}}
        {{- $pages = $subsections -}}
        {{- $subsections = slice -}}
    {{- end -}}

    {{- with $subsections -}}
        <aside>
            <h2 class="section-title">{{ T "list.subsection" (len $subsections) }}</h2>
            <div class="subsection-list">
                <div class="article-list--tile">
                    {{ range . }}
                        {{ partial "article-list/tile" (dict "context" . "size" "250x150" "Type" "section") }}
                    {{ end }}
                </div>
            </div>
        </aside>
    {{- end -}}
    
    {{ $paginator := .Paginate $pages }}
    <!-- {{/*  <section class="article-list--tile">
        {{ range $paginator.Pages }}
        {{ partial "article-list/tile" . }}
        {{ end }}
    </section>  */}}
    {{/*  {{ $sass := resources.Get "sass/article_grid.scss" }}
    {{ $style := $sass | resources.ToCSS | resources.Fingerprint }}
    <link rel="stylesheet" href="{{ $style.Permalink }}" integrity="{{ $style.Data.Integrity }}">  */}} -->
    
    <section class="article-list--grid" style="display: flex; flex-wrap: wrap; flex-direction: row; justify-content: space-between; align-items: auto; align-content: start">
        {{ range $paginator.Pages }}
        <div style="  flex: 1 1 auto; margin: 3px; width: 300px; height: 300px;">
            {{ partial "article-list/tile" . }}
        </div>
        {{ end }}
    </section>
    
        
    {{/*  {{- partial "pagination.html" . -}}  */}}
    {{/*  {{ partialCached "footer/footer" . }}  */}}
{{ end }}

{{/*  {{ define "right-sidebar" }}
    {{ partial "sidebar/right.html" (dict "Context" . "Scope" "homepage") }}
{{ end }}  */}}